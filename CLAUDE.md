# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**Nepali Placeholder Kit** is a Figma plugin built with JavaScript and Webpack for generating authentic Nepali placeholder content. The plugin provides localized data (names, addresses, dates, contact info) for UI/UX designers working on apps and websites for the Nepali market.

## Architecture

The project uses a modern webpack-based build system with the following structure:

### Source Files (`src/`)
- **`src/code.js`**: Main plugin logic with data generators and Figma API integration
- **`src/ui.html`**: Clean HTML template for the plugin interface
- **`src/style.css`**: Comprehensive CSS styling for the plugin UI

### Build Output (Root Directory)
- **`code.js`**: Webpack-compiled and minified main plugin bundle
- **`ui.html`**: Final UI file with inlined CSS (generated by webpack)
- **`manifest.json`**: Figma plugin configuration and metadata

### Plugin Structure
- **Data Generation Classes**:
  - `NepaliNameGenerator`: Generates male/female names in Roman or Devanagari script
  - `NepaliAddressGenerator`: Creates realistic Nepali addresses with provinces/districts
  - `NepaliContactGenerator`: Phone numbers, currency formatting, basic dates
  - `NepaliDateGenerator`: Advanced Bikram Sambat (BS) date generation with time support
- **Integration Class**: `FigmaContentInserter` handles Figma API interactions
- **Message Types**: `generate-name`, `generate-address`, `generate-nepali-date`, `generate-phone`, `generate-currency`, `insert-text`, `insert-image`
- **UI Categories**: 
  - **Names**: Gender selection, Roman/Devanagari script, full/first name options, middle name toggle
  - **Addresses**: Province filtering, realistic location data
  - **Dates**: BS/AD formats, long/short/numeric styles, time inclusion
  - **Contact**: Hidden tab (phone/currency/date generators)
  - **Images**: Coming soon overlay for AI-generated faces
- **Smart Generation**: Automatically updates selected text layers or creates new ones when none selected

The plugin follows Figma's standard architecture with separation between main thread (code.js) and UI thread (ui.html), communicating via postMessage.

## Development Commands

```bash
# Build with webpack (production mode by default)
npm run build

# Watch mode for development (rebuilds on file changes)
npm run watch

# Lint JavaScript files with ESLint
npm run lint

# Auto-fix linting issues
npm run lint:fix
```

## Development Workflow

1. Use `npm run watch` during development for automatic webpack compilation
2. Edit source files in the `src/` directory:
   - `src/code.js`: Main plugin logic and data generators
   - `src/ui.html`: UI template structure
   - `src/style.css`: Plugin styling
3. Webpack automatically:
   - Bundles and minifies `src/code.js` ‚Üí `code.js`
   - Processes `src/ui.html` ‚Üí `ui.html` with inlined CSS
   - Extracts and inlines CSS from `src/style.css`
4. Always run `npm run lint` before committing changes
5. Test the plugin in Figma using the generated `code.js` and `ui.html` files

## Build System

The project uses **Webpack 5** with the following key features:
- **CSS Processing**: MiniCssExtractPlugin + HtmlInlineCSSWebpackPlugin for CSS extraction and inlining
- **HTML Processing**: HtmlWebpackPlugin for template processing
- **Code Minification**: Built-in webpack minification for production builds
- **Development Mode**: Comment out `// mode: 'development'` in `webpack.config.js` for development builds

## Key Files

- **`manifest.json`**: Figma plugin metadata (name: "Nepali Placeholder Kit", no network access)
- **`webpack.config.js`**: Build configuration with CSS inlining and HTML processing
- **`package.json`**: Dependencies and ESLint configuration with Figma plugin globals
- **`.eslintrc`**: Embedded ESLint config supports `figma`, `__html__`, and Node.js globals

## File Organization & Maintenance Guidelines

### Directory Structure
```
nepali-ux-data/first-plugin/
‚îú‚îÄ‚îÄ src/                          # Source files (edit these)
‚îÇ   ‚îú‚îÄ‚îÄ code.js                   # Main plugin logic & data generators
‚îÇ   ‚îú‚îÄ‚îÄ ui.html                   # HTML template for plugin interface
‚îÇ   ‚îî‚îÄ‚îÄ style.css                 # Plugin styling & UI components
‚îú‚îÄ‚îÄ code.js                       # Built output (generated, don't edit)
‚îú‚îÄ‚îÄ ui.html                       # Built output (generated, don't edit)
‚îú‚îÄ‚îÄ manifest.json                 # Figma plugin configuration
‚îú‚îÄ‚îÄ webpack.config.js             # Build system configuration
‚îú‚îÄ‚îÄ package.json                  # Dependencies & scripts
‚îú‚îÄ‚îÄ CLAUDE.md                     # Developer documentation (this file)
‚îú‚îÄ‚îÄ README.md                     # Project overview & setup
‚îú‚îÄ‚îÄ about-plugin.md               # Plugin description & features
‚îî‚îÄ‚îÄ node_modules/                 # Dependencies (auto-generated)
```

### File Organization Rules

**ALWAYS Edit Source Files (`src/` directory):**
- ‚úÖ `src/code.js` - Main plugin logic
- ‚úÖ `src/ui.html` - UI template  
- ‚úÖ `src/style.css` - Styling

**NEVER Edit Build Output (root directory):**
- ‚ùå `code.js` - Auto-generated by webpack
- ‚ùå `ui.html` - Auto-generated by webpack

**Configuration Files:**
- `manifest.json` - Plugin metadata (name, permissions, etc.)
- `webpack.config.js` - Build configuration
- `package.json` - Dependencies and scripts

### Code Organization Standards

#### `src/code.js` Structure
```javascript
// 1. Imports (CSS, external modules)
import "./style.css";

// 2. Data Generation Classes (in order)
class NepaliNameGenerator { /* Name generation logic */ }
class NepaliAddressGenerator { /* Address generation logic */ }
class NepaliContactGenerator { /* Phone/Currency generation */ }
class NepaliDateGenerator { /* BS date generation */ }

// 3. Figma Integration Class
class FigmaContentInserter { /* Figma API interactions */ }

// 4. Main Plugin Logic
figma.showUI(__html__, { width: 400, height: 600 });
figma.ui.onmessage = async (msg) => { /* Message handlers */ };
figma.on("selectionchange", () => { /* Selection tracking */ });
```

#### Adding New Data Generators
1. Create new class following naming pattern: `Nepali[Type]Generator`
2. Add static methods for data generation
3. Include static data arrays/objects for authentic content
4. Add message handler in `figma.ui.onmessage`
5. Update UI in `src/ui.html` with new tab/form
6. Add styling in `src/style.css`

#### UI Component Organization (`src/ui.html`)
```html
<!-- Tab Navigation -->
<div class="tabs">
  <button class="tab active" data-tab="names">Names</button>
  <!-- Add new tabs here -->
</div>

<!-- Tab Panels -->
<div class="content">
  <div class="tab-panel active" data-panel="names">
    <!-- Form components for Names -->
  </div>
  <!-- Add new tab panels here -->
</div>
```

### When to Create New Files

**Create New Files When:**
- Adding major new features (consider separate modules)
- Adding comprehensive tests (`tests/` directory)
- Adding build tools or scripts (`scripts/` directory)
- Adding documentation (`docs/` directory)
- Adding configuration for new tools

**Suggested File Structure for Expansion:**
```
src/
‚îú‚îÄ‚îÄ generators/                   # Split generators into separate files
‚îÇ   ‚îú‚îÄ‚îÄ names.js
‚îÇ   ‚îú‚îÄ‚îÄ addresses.js  
‚îÇ   ‚îú‚îÄ‚îÄ dates.js
‚îÇ   ‚îî‚îÄ‚îÄ contacts.js
‚îú‚îÄ‚îÄ ui/                          # Split UI components
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îú‚îÄ‚îÄ utils/                       # Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ figma-helpers.js
‚îÇ   ‚îî‚îÄ‚îÄ data-validation.js
‚îî‚îÄ‚îÄ data/                        # Static data files
    ‚îú‚îÄ‚îÄ nepali-names.json
    ‚îú‚îÄ‚îÄ addresses.json
    ‚îî‚îÄ‚îÄ districts.json
```

## Developer Onboarding Guide

### Quick Start for New Developers

#### 1. Initial Setup
```bash
# Clone and navigate to project
cd nepali-ux-data/first-plugin

# Install dependencies
npm install

# Start development mode
npm run watch
```

#### 2. Understanding the Codebase
1. **Start with `manifest.json`** - Understand plugin capabilities and permissions
2. **Read `src/code.js`** - Main logic, data generators, and Figma API integration
3. **Examine `src/ui.html`** - UI structure and form components
4. **Review `src/style.css`** - Styling patterns and component design
5. **Check `webpack.config.js`** - Build process and file generation

#### 3. Development Workflow
1. Make changes in `src/` files
2. Webpack automatically rebuilds (`npm run watch`)
3. Test in Figma using generated `code.js` and `ui.html`
4. Run `npm run lint` before committing
5. Use `npm run lint:fix` for automatic formatting

#### 4. Common Development Tasks

**Adding a New Data Type:**
1. Create generator class in `src/code.js`
2. Add static data arrays with authentic content
3. Implement generation methods
4. Add message handler for new type
5. Create UI tab in `src/ui.html`
6. Style new components in `src/style.css`
7. Test integration with Figma API

**Modifying Existing Generators:**
1. Locate relevant class in `src/code.js`
2. Update static data or generation logic
3. Test with different UI configurations
4. Ensure backward compatibility

**UI Changes:**
1. Edit `src/ui.html` for structure
2. Update `src/style.css` for styling
3. Test responsive behavior
4. Ensure accessibility standards

### Code Navigation Tips

#### Finding Specific Functionality
- **Name Generation**: `NepaliNameGenerator` class (line ~10-260 in src/code.js)
- **Address Generation**: `NepaliAddressGenerator` class (line ~260-400)
- **Date Generation**: `NepaliDateGenerator` class (line ~440-570)
- **Figma Integration**: `FigmaContentInserter` class (line ~570-640)
- **Message Handlers**: `figma.ui.onmessage` function (line ~650-790)
- **UI Components**: Individual tab panels in `src/ui.html`
- **Styling**: Component-specific CSS blocks in `src/style.css`

#### Understanding Data Flow
1. **User Interaction** ‚Üí UI form in `src/ui.html`
2. **Form Submission** ‚Üí JavaScript event handlers (inline in HTML)
3. **Message Posting** ‚Üí `figma.ui.postMessage()` to main thread
4. **Message Handling** ‚Üí `figma.ui.onmessage` in `src/code.js`
5. **Data Generation** ‚Üí Relevant generator class methods
6. **Figma Integration** ‚Üí `FigmaContentInserter` methods
7. **UI Updates** ‚Üí Selection change handlers and button text updates

## Current Feature Status

### ‚úÖ Implemented Features
- **Names Generator**: Full Nepali names with gender selection, Roman/Devanagari output, middle name option
- **Addresses Generator**: Realistic Nepali addresses with province filtering and authentic location data
- **Dates Generator**: Advanced Bikram Sambat (BS) date generation with multiple formats and time support
- **Smart Text Insertion**: Automatically updates selected text layers or creates new ones
- **Responsive UI**: Clean tabbed interface with radio cards and modern styling
- **Selection Awareness**: Real-time selection tracking and UI updates

### üöß Partially Implemented
- **Contact Generator**: Phone and currency generators exist but hidden in UI
- **Multiple Format Support**: Basic date formats available, advanced formatting in progress

### üìã Planned Features (Coming Soon)
- **AI-Generated Nepali Faces**: Diverse, authentic profile images for mockups
- **Advanced Image Styles**: Photo-realistic, avatar, and minimal illustration styles
- **Enhanced Contact Data**: Complete phone/currency/date integration in main UI
- **Bulk Generation**: Multi-layer content generation for large designs
- **Export/Import**: Save/load custom data sets and preferences

## Figma Plugin Concept - Original Vision

Goal:
Build a Figma plugin that provides authentic Nepali placeholder content for UI/UX designers working on apps and websites for the Nepali market. The plugin should make it easy to insert Nepali-specific user data directly into Figma designs.

Core Features:

AI-Generated Nepali Faces

Library of diverse Nepali faces (different ethnicities, age groups, genders).

Images are royalty-free and AI-generated to avoid privacy issues.

Option for photo-realistic and avatar styles.

Nepali Name Generator

Realistic Nepali names (Male, Female, Neutral).

Output in Romanized (Sandeep Shrestha) or Devanagari (‡§∏‡§®‡•ç‡§¶‡•Ä‡§™ ‡§∂‡•ç‡§∞‡•á‡§∑‡•ç‡§†).

Address & Location Generator

Realistic Nepali addresses:
Baneshwor-10, Kathmandu
Pokhara-6, Lakeside

Includes ward numbers, districts, and provinces.

Phone, Currency & Date Formatting

Phone numbers in Nepali format (+977-9812345678).

Prices in NPR (e.g., Rs. 1,250 / ‡§∞‡•Å ‡•ß,‡•®‡•´‡•¶).

Dates in both Nepali (Bikram Sambat) and English format.

Smart Generation & Direct Updates

Simple, intuitive content generation that adapts to your workflow:

**How it works:**
- **No text selected**: Creates a new text layer with generated content
- **Text layers selected**: Updates each selected layer with unique content
- **Multiple layers**: Each gets different content (no duplicates)
- **Preserves fonts**: Maintains existing font settings when updating

**Usage**: Simply select text layers you want to update (or select nothing to create new), choose your content type (Names, Addresses, Dates), configure settings, and click "Generate". The plugin intelligently handles the rest.

Perfect for both populating new designs and refreshing existing mockups with authentic Nepali content.

Advanced Features (Future):

Avatar styles (illustrated, minimal).

Dynamic e-commerce or fintech data (product names, prices).

API integration for real-time Nepali datasets.

Target Audience:

UI/UX designers, freelancers, and agencies working on Nepali or South Asian products.

Startups building local apps and websites.

Monetization Plan:

Free tier: Basic names, limited faces.

Pro tier ($5‚Äì$10/month): Unlimited assets, bulk generation, API support.

One-time lifetime plan for early adopters.

## Current Technical Implementation

**Tech Stack:**
- **Frontend**: Vanilla JavaScript with modern ES6+ features
- **Build System**: Webpack 5 with CSS processing and HTML inlining
- **Styling**: Pure CSS with modern flexbox/grid layouts and custom radio card components
- **API Integration**: Figma Plugin API for text/node manipulation and selection tracking
- **Data Generation**: Static JavaScript classes with authentic Nepali datasets
- **Development**: ESLint with Figma-specific rules and auto-fixing

**Architecture Decisions:**
- **No External Dependencies**: Self-contained plugin with no runtime dependencies
- **Static Data Generation**: All content generated client-side for performance and privacy
- **Modular Class Structure**: Separate generators for different content types
- **Smart UI Logic**: Dynamic button text and context-aware generation
- **Webpack Integration**: CSS inlining for single-file distribution

## Future Technical Roadmap

**Phase 2 - Enhanced Content:**
- AI image integration with cloud storage (AWS S3/Firebase)
- Advanced data generation algorithms
- Dynamic content APIs for real-time datasets

**Phase 3 - Advanced Features:**
- React/TypeScript migration for complex UI interactions
- Advanced state management for bulk operations
- Plugin settings persistence and custom data import

**Vision:**
Create the definitive tool for designing authentic Nepali digital products, eliminating reliance on Western placeholder content and enabling designers to create culturally relevant mockups with realistic, localized data.

## Maintenance & File System Standards

### Code Maintenance Guidelines

#### Regular Maintenance Tasks
1. **Weekly:**
   - Run `npm run lint` to check for code style issues
   - Test all generator functions with different inputs
   - Verify UI responsiveness across different screen sizes

2. **Monthly:**
   - Update dependencies (`npm update`)
   - Review and update Nepali data for accuracy
   - Test plugin compatibility with latest Figma updates

3. **Quarterly:**
   - Audit codebase for performance optimizations
   - Review user feedback for feature improvements
   - Update documentation for any API changes

#### File System Organization Principles

**Single Responsibility Principle:**
- Each file should have one clear purpose
- `src/code.js` - Plugin logic only
- `src/ui.html` - UI structure only  
- `src/style.css` - Styling only

**Consistency Standards:**
- Use camelCase for JavaScript variables/functions
- Use kebab-case for CSS classes
- Use PascalCase for class names
- Follow existing naming patterns for new additions

**Documentation Requirements:**
- Add JSDoc comments for all public methods
- Document complex data structures
- Include usage examples for new generators
- Update CLAUDE.md when adding new features

#### When to Refactor vs. Extend

**Refactor When:**
- File size exceeds 1000 lines
- Functions become longer than 50 lines
- Code duplication appears across classes
- Performance issues are identified

**Extend When:**
- Adding new data types
- Implementing new UI components
- Adding configuration options
- Integrating new Figma API features

### Troubleshooting Guide

#### Common Issues & Solutions

**Build Errors:**
```bash
# Clear node_modules and reinstall
rm -rf node_modules package-lock.json
npm install

# Check webpack configuration
npm run build -- --mode=development
```

**Linting Errors:**
```bash
# Auto-fix most issues
npm run lint:fix

# Check specific files
npx eslint src/code.js --fix
```

**Figma Integration Issues:**
- Verify `manifest.json` permissions
- Check browser console for error messages
- Test with minimal data first
- Ensure Figma API methods are properly awaited

**UI Rendering Problems:**
- Check CSS syntax in `src/style.css`
- Verify HTML structure in `src/ui.html`
- Test with browser developer tools
- Ensure webpack CSS inlining is working

#### Development Environment Setup

**Prerequisites:**
- Node.js 16+ 
- npm 8+
- Figma desktop app or web app access

**Recommended VS Code Extensions:**
- ESLint
- Prettier
- CSS Peek
- Auto Rename Tag
- Figma Plugin API Autocomplete

**Git Workflow:**
```bash
# Feature development
git checkout -b feature/new-generator
git add src/
git commit -m "Add new generator for [feature]"
git push origin feature/new-generator

# Always run before committing
npm run lint
npm run build
```

### File Creation Standards

#### When to Create New Files

**Required New Files:**
- `tests/` directory for unit tests
- `docs/` directory for detailed documentation
- `scripts/` directory for build/deployment scripts
- `data/` directory for large static datasets

**Optional New Files:**
- Component libraries for complex UI
- Utility modules for shared functions
- Configuration files for new tools
- Type definitions for better IDE support

#### File Naming Conventions

**Source Files:**
- `kebab-case.js` for modules
- `PascalCase.js` for classes
- `camelCase.css` for stylesheets
- `lowercase.html` for templates

**Configuration Files:**
- `.config.js` suffix for configuration
- `.test.js` suffix for tests
- `.min.js` suffix for minified files
- `.d.ts` suffix for type definitions

#### New File Template Structure

**New Generator Class:**
```javascript
/**
 * Generator for [Type] content
 * Provides authentic Nepali [description]
 */
class Nepali[Type]Generator {
  // Static data arrays
  static data = [];
  
  /**
   * Generate [type] content
   * @param {string} options - Generation options
   * @returns {string} Generated content
   */
  static generate(options = {}) {
    // Implementation
  }
}
```

**New UI Component:**
```html
<!-- [Component Name] Tab Panel -->
<div class="tab-panel" data-panel="[name]">
  <div class="pill-card">
    Generate by <strong>clicking the button</strong> below or by 
    <strong>selecting a text layer.</strong>
  </div>
  
  <div class="form-group">
    <label>[Option Label]</label>
    <!-- Form controls -->
  </div>
  
  <div class="actions">
    <button onclick="generate[Type]()" id="[type]GenerateBtn">
      <span class="selectedLayerCount">Generate New Data</span>
    </button>
  </div>
</div>
```

### System Organization for Claude Code

**When working on this project, always:**

1. **Read Before Writing**: Always examine existing code patterns before making changes
2. **Follow Established Patterns**: Use existing naming conventions and code structure
3. **Update Documentation**: Modify CLAUDE.md when adding new features or changing architecture
4. **Test Integration**: Ensure new code works with existing Figma API integration
5. **Maintain Consistency**: Keep the same code style and organization principles
6. **Preserve Build System**: Don't modify webpack config unless specifically needed
7. **Respect File Boundaries**: Edit source files only, never build output

**File Priority for Claude Code:**
1. Always read `CLAUDE.md` first for context
2. Check `src/code.js` for existing implementations
3. Review `src/ui.html` for UI patterns  
4. Examine `src/style.css` for styling standards
5. Reference `manifest.json` for plugin capabilities
6. Consult `package.json` for available commands

This organization ensures maintainable, scalable code that new developers can easily understand and contribute to.